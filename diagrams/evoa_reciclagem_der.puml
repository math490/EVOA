@startuml entidade_relacionamento

!theme amiga
hide circle

entity "USUARIO" as usuario {
  * id_usuario : Integer <<PK>>
  --
  * nome : VARCHAR(100)
  * email : VARCHAR(100) <<UNIQUE>>
  * senha : VARCHAR(255)
  * nivel : INTEGER
  * xp_total : INTEGER
  * cash_disponivel : DECIMAL(10,2)
}

entity "RECICLAGEM" as reciclagem {
  * id_reciclagem : Integer <<PK>>
  --
  # id_usuario : Integer <<FK>>
  * material : ENUM('PLASTICO','OUTROS')
  * quantidade : DECIMAL(8,2)
  * data_registro : DATETIME
  * xp_gerado : INTEGER
  * cash_gerado : DECIMAL(8,2)
}

entity "DENUNCIA" as denuncia {
  * id_denuncia : Integer <<PK>>
  --
  # id_usuario : Integer <<FK>>
  * tipo : ENUM('QUEIMADAS','OUTROS')
  * descricao : TEXT
  * localizacao : VARCHAR(200)
  * urgencia : ENUM('BAIXA','MEDIA','ALTA')
  * status : ENUM('PENDENTE','RESOLVIDA','CANCELADA')
  * data_denuncia : DATETIME
}

entity "EVIDENCIA" as evidencia {
  * id_evidencia : Integer <<PK>>
  --
  # id_denuncia : Integer <<FK>>
  * url_imagem : VARCHAR(500)
  * data_upload : DATETIME
}

entity "RECOMPENSA" as recompensa {
  * id_recompensa : Integer <<PK>>
  --
  * nome : VARCHAR(100)
  * descricao : TEXT
  * custo_cash : DECIMAL(8,2)
  * tipo : ENUM('DESCONTO','BRINDE','SERVICO')
  * disponivel : BOOLEAN
  * estoque : INTEGER
}

entity "RESGATE" as resgate {
  * id_resgate : Integer <<PK>>
  --
  # id_usuario : Integer <<FK>>
  # id_recompensa : Integer <<FK>>
  * data_resgate : DATETIME
  * status : ENUM('PENDENTE','PROCESSADO','ENTREGUE','CANCELADO')
  * codigo_utilizacao : VARCHAR(100)
}

entity "RANKING" as ranking {
  * id_ranking : Integer <<PK>>
  --
  # id_usuario : Integer <<FK>>
  * periodo : ENUM('DIARIO','SEMANAL','MENSAL','ANUAL')
  * posicao : INTEGER
  * xp_periodo : INTEGER
  * data_atualizacao : DATETIME
}

usuario ||--o{ reciclagem : "realiza"
usuario ||--o{ denuncia : "faz"
usuario }o--o{ recompensa : "resgata" via resgate
usuario ||--o{ ranking : "participa"
usuario ||--o{ resgate : "recebe"
recompensa ||--o{ resgate : "abre"

denuncia ||--o{ evidencia : "possui"

@enduml